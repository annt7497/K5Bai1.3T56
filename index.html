<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[IT5-Lesson2.1] B·∫£n ch·∫•t c·ªßa D·ªØ li·ªáu</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Th√™m font Calistoga (theo y√™u c·∫ßu tr∆∞·ªõc) -->
    <link href="https://fonts.googleapis.com/css2?family=Calistoga&display=swap" rel="stylesheet">
    <style>
        /* ƒê·ªãnh nghƒ©a font Calistoga cho to√†n b·ªô trang */
        body {
            font-family: 'Calistoga', cursive;
        }
        .data-table th, .data-table td {
            border: 1px solid #e5e7eb; /* gray-200 */
            padding: 8px;
            text-align: left;
            font-size: 0.9rem;
        }
        .data-table th {
            background-color: #f3f4f6; /* gray-100 */
            font-weight: bold;
            color: #1f2937; /* gray-800 */
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* Hi·ªáu ·ª©ng l√†m s·∫°ch d·ªØ li·ªáu */
        .highlight-error {
            background-color: #fecaca; /* red-200 */
            transition: background-color 0.5s ease;
        }
        .highlight-cleaned {
            background-color: #d1fae5; /* green-100 */
            transition: background-color 0.5s ease;
        }
        .error-checkbox:checked + label {
            background-color: #a7f3d0; /* green-200 */
            border-color: #10b981; /* green-500 */
        }
        .error-checkbox {
            appearance: none;
            width: 0;
            height: 0;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8">

    <div class="max-w-6xl mx-auto">
        <!-- Ti√™u ƒë·ªÅ B√†i h·ªçc -->
        <header class="text-center mb-8 p-6 bg-white shadow-xl rounded-2xl border-b-4 border-indigo-600">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800 mb-2">
                <span class="text-indigo-600">B·∫¢N CH·∫§T C·ª¶A D·ªÆ LI·ªÜU</span>
            </h1>
            <p class="text-xl text-gray-600 font-semibold mb-1">B√†i h·ªçc Tin h·ªçc - L·ªõp 5 (Ti·∫øt 5 & 6)</p>
            <!-- M·ª•c ti√™u b√†i h·ªçc -->
            <p class="text-lg text-gray-700 font-medium italic">
                M·ª•c ti√™u: C√°c c√°ch ch·ªânh s·ª≠a v√† c·∫≠p nh·∫≠t d·ªØ li·ªáu: lo·∫°i b·ªè c√°c gi√° tr·ªã tr√πng v√† x·ª≠ l√Ω gi√° tr·ªã b·ªã thi·∫øu.
            </p>
        </header>

        <!-- Khu v·ª±c Th√¥ng b√°o (Message Box thay th·∫ø Alert) -->
        <div id="message-box" class="fixed inset-0 bg-gray-600 bg-opacity-75 hidden items-center justify-center z-50">
            <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm mx-4 text-center">
                <h3 class="text-xl font-bold mb-4 text-gray-800">Th√¥ng B√°o</h3>
                <p id="message-text" class="mb-6 text-gray-600"></p>
                <button onclick="closeMessageBox()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-full transition duration-300">ƒê√≥ng</button>
            </div>
        </div>

        <!-- PH·∫¶N VIDEO: C√°c thao t√°c c∆° b·∫£n trong Excel (ƒê√£ chuy·ªÉn th√†nh li√™n k·∫øt tr·ª±c ti·∫øp) -->
        <section class="mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h2 class="text-2xl font-bold text-gray-700 mb-4 border-l-4 border-purple-500 pl-3">
                T√†i li·ªáu tham kh·∫£o: C√°c Thao T√°c C∆° B·∫£n Trong Excel
            </h2>
            <p class="text-gray-600 mb-4 italic">Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu l√†m s·∫°ch d·ªØ li·ªáu, em h√£y c√πng √¥n l·∫°i m·ªôt s·ªë thao t√°c c∆° b·∫£n trong Excel qua video sau:</p>
            
            <!-- THAY TH·∫æ KHUNG VIDEO B·ªä L·ªñI B·∫∞NG LI√äN K·∫æT TR·ª∞C TI·∫æP -->
            <div class="p-4 bg-purple-100 rounded-xl border-2 border-purple-400 text-center shadow-lg">
                <p class="text-lg font-semibold text-purple-700 mb-3">Video H∆∞·ªõng d·∫´n: Thao t√°c c∆° b·∫£n trong Excel</p>
                <a 
                    href="https://www.youtube.com/watch?v=DHiK-e_r0eE" 
                    target="_blank" 
                    class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-bold rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 transition duration-300 transform hover:scale-105"
                    title="B·∫•m ƒë·ªÉ m·ªü video tr√™n YouTube">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 mr-2">
                        <path d="M6.347 3.397A2.25 2.25 0 0 1 8.25 2.25h7.5A2.25 2.25 0 0 1 17.653 3.397L21.75 12l-4.097 8.603A2.25 2.25 0 0 1 15.75 21.75h-7.5A2.25 2.25 0 0 1 6.347 20.603L2.25 12l4.097-8.603Z" />
                    </svg>
                    XEM VIDEO TR·ª∞C TI·∫æP TR√äN YOUTUBE
                </a>
                <p class="text-sm text-gray-500 mt-2">D√°n ƒë∆∞·ªùng link sau v√†o tr√¨nh duy·ªát n·∫øu n√∫t b·∫•m kh√¥ng ho·∫°t ƒë·ªông: <a href="https://www.youtube.com/watch?v=DHiK-e_r0eE" target="_blank" class="text-red-500 underline">https://www.youtube.com/watch?v=DHiK-e_r0eE</a></p>
            </div>
        </section>
        <!-- K·∫æT TH√öC PH·∫¶N VIDEO -->

        <!-- Ph·∫ßn 1: Kh√°m ph√° D·ªØ li·ªáu c√≥ l·ªói -->
        <section class="mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h2 class="text-2xl font-bold text-gray-700 mb-4 border-l-4 border-red-500 pl-3">
                1. Kh√°m ph√° & Ph√°t hi·ªán L·ªói D·ªØ li·ªáu
            </h2>
            <p class="text-gray-600 mb-6 italic">H√£y quan s√°t b·∫£ng d·ªØ li·ªáu b√°n h√†ng b√™n d∆∞·ªõi. Em c√≥ th·∫•y ƒëi·ªÅu g√¨ b·∫•t th∆∞·ªùng kh√¥ng?</p>
            
            <div id="data-container">
                <!-- B·∫£ng d·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c render t·∫°i ƒë√¢y -->
                <p class="text-center text-gray-500 py-4">ƒêang t·∫£i b·∫£ng d·ªØ li·ªáu...</p>
            </div>
        </section>
        
        <!-- Ph·∫ßn 2: Th·ª±c h√†nh Ph√°t hi·ªán L·ªói -->
        <section class="mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h2 class="text-2xl font-bold text-gray-700 mb-6 border-l-4 border-green-500 pl-3">
                2. Th·ª±c h√†nh Ph√°t hi·ªán L·ªói
            </h2>
            
            <p class="text-lg font-bold text-gray-800 mb-4">
                Trong b·∫£ng em v·ª´a kh√°m ph√° ƒë√£ c√≥ nh·ªØng l·ªói g√¨? (Ch·ªçn t·∫•t c·∫£ c√°c ƒë√°p √°n ƒë√∫ng)
            </p>

            <div id="error-check-container" class="space-y-3">
                <!-- C√°c √¥ checkbox tr·∫Øc nghi·ªám -->
                <div class="flex items-center">
                    <input type="checkbox" id="check-duplicate" class="error-checkbox" data-correct="true">
                    <label for="check-duplicate" class="w-full cursor-pointer p-3 bg-gray-100 rounded-lg shadow-sm border border-gray-300 hover:bg-gray-200 transition duration-150">
                        A. Th√¥ng tin tr√πng l·∫∑p
                    </label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-missing" class="error-checkbox" data-correct="true">
                    <label for="check-missing" class="w-full cursor-pointer p-3 bg-gray-100 rounded-lg shadow-sm border border-gray-300 hover:bg-gray-200 transition duration-150">
                        B. √î thi·∫øu d·ªØ li·ªáu
                    </label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-inconsistent" class="error-checkbox" data-correct="true">
                    <label for="check-inconsistent" class="w-full cursor-pointer p-3 bg-gray-100 rounded-lg shadow-sm border border-gray-300 hover:bg-gray-200 transition duration-150">
                        C. Kh√¥ng ƒë·ªìng nh·∫•t d·ªØ li·ªáu gi·ªØa c√°c c·ªôt (ho·∫∑c trong c√πng m·ªôt c·ªôt)
                    </label>
                </div>
            </div>

            <button onclick="checkErrors()" id="check-button" class="mt-6 w-full px-6 py-3 font-bold text-white bg-indigo-500 rounded-lg shadow-lg hover:bg-indigo-600 transition duration-300 transform hover:scale-[1.01]">
                Ki·ªÉm tra ƒê√°p √°n
            </button>

            <!-- N√∫t th·ª±c h√†nh s·∫Ω hi·ªán ra sau khi ki·ªÉm tra ƒë√∫ng -->
            <div id="cleaning-buttons" class="hidden mt-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3 text-center">B·∫Øt ƒë·∫ßu L√†m s·∫°ch D·ªØ li·ªáu:</h3>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                    <button onclick="removeDuplicates()" class="flex-1 px-4 py-2 font-bold text-white bg-blue-500 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 transform hover:scale-105">
                        1. X√≥a D·ªØ li·ªáu TR√ôNG L·∫∂P
                    </button>
                    <button onclick="cleanAndStandardize()" class="flex-1 px-4 py-2 font-bold text-white bg-green-500 rounded-lg shadow-md hover:bg-green-600 transition duration-300 transform hover:scale-105">
                        2. Chu·∫©n h√≥a & ƒêi·ªÅn THI·∫æU
                    </button>
                </div>
            </div>

            <p id="status-message" class="text-center text-lg font-semibold text-gray-700 mt-4 h-8">
                H√£y ch·ªçn c√°c l·ªói trong b·∫£ng v√† nh·∫•n "Ki·ªÉm tra ƒê√°p √°n".
            </p>
        </section>
        
        <!-- Ph·∫ßn 3 (M·ªöI): B√†i T·∫≠p V·∫≠n D·ª•ng -->
        <section class="mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h2 class="text-2xl font-bold text-gray-700 mb-4 border-l-4 border-yellow-500 pl-3">
                3. B√†i T·∫≠p V·∫≠n D·ª•ng: Ph√¢n t√≠ch K·∫øt qu·∫£ H·ªçc t·∫≠p
            </h2>
            <p class="text-gray-600 mb-4 italic">H√£y v·∫≠n d·ª•ng c√°c k·ªπ nƒÉng l√†m s·∫°ch d·ªØ li·ªáu v·ª´a h·ªçc ƒë·ªÉ ph√¢n t√≠ch k·∫øt qu·∫£ h·ªçc t·∫≠p gi·ªØa k·ª≥ I c·ªßa b·∫£n th√¢n. Em c√≥ th·ªÉ s·ª≠ d·ª•ng Excel ho·∫∑c Google Sheets.</p>
            
            <ol class="list-decimal list-inside space-y-4 ml-4">
                <li>
                    <span class="font-bold text-gray-800">Nhi·ªám v·ª• 1: Thu th·∫≠p D·ªØ li·ªáu</span>
                    <p class="text-sm text-gray-700 ml-2">Ghi l·∫°i ƒëi·ªÉm trung b√¨nh gi·ªØa k·ª≥ I c√°c m√¥n h·ªçc c·ªßa b·∫£n th√¢n (ho·∫∑c d√πng b·∫£ng m·∫´u) v√†o m·ªôt b·∫£ng t√≠nh.</p>
                </li>
                <li>
                    <span class="font-bold text-red-600">Nhi·ªám v·ª• 2: Th·ª±c h√†nh L√†m s·∫°ch D·ªØ li·ªáu</span>
                    <ul class="list-disc list-inside ml-4 text-sm text-gray-700 space-y-1">
                        <li>Ki·ªÉm tra v√† ƒëi·ªÅn c√°c √¥ b·ªã thi·∫øu ƒëi·ªÉm ho·∫∑c nh·∫≠p sai.</li>
                        <li>Chu·∫©n h√≥a l·∫°i c√°ch ghi t√™n m√¥n h·ªçc (v√≠ d·ª•: t·∫•t c·∫£ ƒë·ªÅu vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu: "To√°n" thay v√¨ "to√°n").</li>
                        <li>(N√¢ng cao) Chu·∫©n h√≥a c√°ch ghi s·ªë th·∫≠p ph√¢n (t·∫•t c·∫£ l√† `7.5` thay v√¨ `7,5`) ho·∫∑c k√Ω hi·ªáu ƒë√°nh gi√° (th√™m ‚≠ê).</li>
                    </ul>
                </li>
                <li>
                    <span class="font-bold text-blue-600">Nhi·ªám v·ª• 3: S·∫Øp x·∫øp v√† Ph√¢n t√≠ch</span>
                    <ul class="list-disc list-inside ml-4 text-sm text-gray-700 space-y-1">
                        <li>S·∫Øp x·∫øp ƒëi·ªÉm t·ª´ cao ƒë·∫øn th·∫•p ƒë·ªÉ x√°c ƒë·ªãnh m√¥n h·ªçc m·∫°nh nh·∫•t v√† y·∫øu nh·∫•t.</li>
                        <li>T·∫°o bi·ªÉu ƒë·ªì c·ªôt (Insert ‚Üí Chart) ƒë·ªÉ so s√°nh ƒëi·ªÉm c√°c m√¥n.</li>
                        <li>T·∫°o th√™m c·ªôt "M·ª•c ti√™u cu·ªëi k·ª≥" ƒë·ªÉ l·∫≠p k·∫ø ho·∫°ch c·ªë g·∫Øng cho cu·ªëi k·ª≥.</li>
                    </ul>
                </li>
            </ol>
        </section>

        <!-- Ph·∫ßn 4 (ƒê√£ ƒë·ªïi s·ªë th·ª© t·ª±): T√≥m T·∫Øt Ph∆∞∆°ng Ph√°p -->
        <section class="mb-10 p-6 bg-white shadow-xl rounded-2xl">
            <h2 class="text-2xl font-bold text-gray-700 mb-4 border-l-4 border-yellow-500 pl-3">
                4. T√≥m T·∫Øt Ph∆∞∆°ng Ph√°p & K·ªπ Thu·∫≠t L√†m S·∫°ch
            </h2>
            <p class="text-gray-600 mb-4 italic">ƒê·ªÉ c√≥ ƒë∆∞·ª£c m·ªôt b·∫£ng d·ªØ li·ªáu s·∫°ch v√† ƒë√°ng tin c·∫≠y, em c·∫ßn th·ª±c hi·ªán theo 3 b∆∞·ªõc sau:</p>
            
            <ol class="list-decimal list-inside space-y-4 ml-4">
                <li>
                    <span class="font-bold text-red-600">Ph√°t hi·ªán v√† nh·∫≠n di·ªán l·ªói:</span>
                    <p class="text-sm text-gray-700 ml-2">Quan s√°t d·ªØ li·ªáu ƒë·ªÉ t√¨m ra c√°c v·∫•n ƒë·ªÅ nh∆∞: th√¥ng tin tr√πng l·∫∑p, √¥ thi·∫øu d·ªØ li·ªáu (Missing Values) ho·∫∑c ƒë·ªãnh d·∫°ng kh√¥ng ƒë·ªìng nh·∫•t (Inconsistent Data).</p>
                </li>
                <li>
                    <span class="font-bold text-blue-600">Lo·∫°i b·ªè d·ªØ li·ªáu TR√ôNG L·∫∂P:</span>
                    <p class="text-sm text-gray-700 ml-2">Gi·ªØ l·∫°i m·ªôt d√≤ng duy nh·∫•t cho c√°c th√¥ng tin b·ªã l·∫∑p l·∫°i. Vi·ªác n√†y gi√∫p m√°y t√≠nh kh√¥ng b·ªã nh·∫ßm l·∫´n khi ph√¢n t√≠ch.</p>
                </li>
                <li>
                    <span class="font-bold text-green-600">Chu·∫©n h√≥a v√† X·ª≠ l√Ω THI·∫æU:</span>
                    <ul class="list-disc list-inside ml-4 text-sm text-gray-700 space-y-1">
                        <li><span class="font-medium">Chu·∫©n h√≥a ƒë·ªãnh d·∫°ng:</span> ƒê∆∞a d·ªØ li·ªáu v·ªÅ c√πng m·ªôt ki·ªÉu vi·∫øt (v√≠ d·ª•: t·∫•t c·∫£ ƒë·ªÅu l√† "4.7‚≠ê" ho·∫∑c t·∫•t c·∫£ ƒë·ªÅu vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu).</li>
                        <li><span class="font-medium">X·ª≠ l√Ω gi√° tr·ªã thi·∫øu:</span> ƒêi·ªÅn gi√° tr·ªã h·ª£p l√Ω v√†o c√°c √¥ b·ªã tr·ªëng (v√≠ d·ª•: ƒëi·ªÅn gi√° trung b√¨nh ho·∫∑c b·ªï sung gi√° tr·ªã c√≤n thi·∫øu).</li>
                    </ul>
                </li>
            </ol>
        </section>

        <!-- Ph·∫ßn 5 (ƒê√£ ƒë·ªïi s·ªë th·ª© t·ª±): T·ªïng k·∫øt & Suy ng·∫´m -->
        <section class="p-6 bg-indigo-50 shadow-xl rounded-2xl border-l-4 border-indigo-500">
            <h2 class="text-2xl font-bold text-indigo-700 mb-4">
                5. T·ªïng k·∫øt & T∆∞ duy D·ªØ li·ªáu (Data Thinking)
            </h2>
            <div class="space-y-4 text-gray-700">
                <p><span class="font-bold text-indigo-900">1. V√¨ sao c·∫ßn l√†m s·∫°ch d·ªØ li·ªáu?</span></p>
                <p class="pl-4 italic">‚Üí ƒê·ªÉ m√°y t√≠nh v√† con ng∆∞·ªùi d·ªÖ quan s√°t, d·ªÖ hi·ªÉu v√† ra quy·∫øt ƒë·ªãnh ch√≠nh x√°c h∆°n. D·ªØ li·ªáu sai/thi·∫øu s·∫Ω d·∫´n ƒë·∫øn k·∫øt qu·∫£ ph√¢n t√≠ch sai.</p>
                
                <p><span class="font-bold text-indigo-900">2. D·ªØ li·ªáu s·∫°ch gi√∫p √≠ch g√¨?</span></p>
                <p class="pl-4 italic">‚Üí Gi√∫p c√°c ·ª©ng d·ª•ng AI (nh∆∞ Shopee, YouTube) g·ª£i √Ω s·∫£n ph·∫©m/video ch√≠nh x√°c h∆°n, v√† gi√∫p ch√∫ng ta ph√¢n t√≠ch k·∫øt qu·∫£ h·ªçc t·∫≠p ƒë·ªÉ ƒë·∫∑t m·ª•c ti√™u ƒë√∫ng ƒë·∫Øn.</p>
            </div>
        </section>
        
    </div>

    <script>
        // D·ªØ li·ªáu ban ƒë·∫ßu v·ªõi c√°c l·ªói theo y√™u c·∫ßu
        const initialData = [
            // 1. L·ªói tr√πng l·∫∑p & vi·∫øt hoa/th∆∞·ªùng kh√¥ng th·ªëng nh·∫•t (Tai nghe Bluetooth)
            { stt: 1, ten: "tai nghe bluetooth", gia: "159000", danhGia: "‚≠ê4.7" },
            { stt: 2, ten: "tai nghe Bluetooth", gia: "159,000ƒë", danhGia: "4.7" }, // Tr√πng v·ªõi STT 1
            { stt: 3, ten: "·ªêp ƒëi·ªán tho·∫°i trong su·ªët", gia: "69000", danhGia: "4.8‚≠ê" },
            // 2. L·ªói thi·∫øu & kh√¥ng th·ªëng nh·∫•t (·ªêp ƒëi·ªán tho·∫°i)
            { stt: 4, ten: "op dien thoai trong suot", gia: "(tr·ªëng)", danhGia: "4,8" }, // Thi·∫øu gi√°, Tr√πng v·ªõi STT 3
            // 3. L·ªói ƒë√°nh gi√° kh√¥ng th·ªëng nh·∫•t (B√¨nh gi·ªØ nhi·ªát)
            { stt: 5, ten: "B√¨nh gi·ªØ nhi·ªát Inox", gia: "89,000", danhGia: "9/10" }, // L·ªói kh√¥ng ƒë·ªìng nh·∫•t
            { stt: 6, ten: "Binh giu nhiet Inox", gia: "89,000ƒë", danhGia: "4.5" }, // Tr√πng v·ªõi STT 5
            // 4. L·ªói thi·∫øu & tr√πng l·∫∑p (S·∫°c d·ª± ph√≤ng)
            { stt: 7, ten: "S·∫°c d·ª± ph√≤ng 10.000mAh", gia: "199,000", danhGia: "4.6" },
            { stt: 8, ten: "S·∫°c d·ª± ph√≤ng 10000mAh", gia: "199,000ƒë", danhGia: "(tr·ªëng)" }, // Thi·∫øu ƒë√°nh gi√°, Tr√πng v·ªõi STT 7
            // 5. L·ªói tr√πng l·∫∑p (Chu·ªôt kh√¥ng d√¢y)
            { stt: 9, ten: "chu·ªôt kh√¥ng d√¢y", gia: "129.000ƒë", danhGia: "‚≠ê4.8" },
            { stt: 10, ten: "Chu·ªôt Kh√¥ng D√¢y", gia: "129,000", danhGia: "4.8" }, // Tr√πng v·ªõi STT 9
            // 6. L·ªói thi·∫øu gi√°
            { stt: 11, ten: "Loa Bluetooth di ƒë·ªông", gia: "(thi·∫øu)", danhGia: "‚≠ê4.9" },
            // 7. L·ªói thi·∫øu t√™n v√† ƒë√°nh gi√° kh√¥ng th·ªëng nh·∫•t
            { stt: 12, ten: "(thi·∫øu t√™n s·∫£n ph·∫©m)", gia: "250,000ƒë", danhGia: "10/10" },
            // 8. D·ªØ li·ªáu s·∫°ch (l√†m m·ªëc)
            { stt: 13, ten: "B√†n ph√≠m c∆° mini", gia: "450,000", danhGia: "4.9‚≠ê" },
        ];

        let currentData = [...initialData];
        let status = 0; // 0: Initial, 1: Error Checked, 2: Duplicates Removed, 3: Cleaned

        const MSG_BOX = document.getElementById('message-box');
        const MSG_TEXT = document.getElementById('message-text');
        const STATUS_MSG = document.getElementById('status-message');
        
        // T·∫•t c·∫£ c√°c d√≤ng ƒë·ªÅu c√≥ l·ªói ·ªü m·ª©c ƒë·ªô n√†o ƒë√≥, tr·ª´ STT 13
        const ERROR_ROWS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; 

        function showMessageBox(message) {
            MSG_TEXT.textContent = message;
            MSG_BOX.classList.remove('hidden');
            MSG_BOX.classList.add('flex');
        }

        function closeMessageBox() {
            MSG_BOX.classList.add('hidden');
            MSG_BOX.classList.remove('flex');
        }

        /**
         * Render b·∫£ng d·ªØ li·ªáu ra HTML
         */
        function renderTable() {
            const container = document.getElementById('data-container');
            let html = '<table class="data-table">';
            
            // Header: Ch·ªâ gi·ªØ l·∫°i 3 c·ªôt theo y√™u c·∫ßu m·ªõi
            html += '<thead><tr><th>STT</th><th>T√™n s·∫£n ph·∫©m</th><th>Gi√° b√°n (VND)</th><th>ƒê√°nh gi√° sao</th></tr></thead>';
            
            // Body
            html += '<tbody id="data-body">';
            currentData.forEach((item, index) => {
                // Th√™m class cho d√≤ng c√≥ l·ªói ho·∫∑c ƒë√£ ƒë∆∞·ª£c l√†m s·∫°ch
                let rowClass = '';
                // N·∫øu ƒë√£ ki·ªÉm tra l·ªói (status >= 1), l√†m n·ªïi b·∫≠t c√°c d√≤ng l·ªói ƒë·ªÉ g·ª£i √Ω
                if (status >= 1 && ERROR_ROWS.includes(item.stt) && status < 3) {
                    rowClass = 'highlight-error';
                }
                if (status === 3) {
                     // N·∫øu d·ªØ li·ªáu ƒë√£ s·∫°ch, l√†m n·ªïi b·∫≠t m√†u xanh
                     rowClass = 'highlight-cleaned';
                }
                
                // Chu·∫©n b·ªã d·ªØ li·ªáu hi·ªÉn th·ªã, gi·ªØ nguy√™n l·ªói n·∫øu ch∆∞a l√†m s·∫°ch (status < 3)
                const ten = status < 3 ? item.ten : cleanProductName(item.ten);
                const gia = status < 3 ? item.gia : cleanPrice(item.gia);
                const danhGia = status < 3 ? item.danhGia : cleanRating(item.danhGia);

                html += `<tr class="${rowClass}" data-stt="${item.stt}">
                    <td>${index + 1}</td>
                    <td class="${status === 3 && (item.stt === 12 || item.stt === 4) ? 'font-bold text-green-700' : ''}">${ten}</td>
                    <td class="${status === 3 && (item.stt === 4 || item.stt === 11) ? 'font-bold text-green-700' : ''}">${gia}</td>
                    <td class="${status === 3 && (item.stt === 8 || item.stt === 5 || item.stt === 12) ? 'font-bold text-green-700' : ''}">${danhGia}</td>
                </tr>`;
            });
            html += '</tbody></table>';
            container.innerHTML = html;

            // N·∫øu ƒë√£ ki·ªÉm tra l·ªói, hi·ªÉn th·ªã n√∫t th·ª±c h√†nh ti·∫øp
            if (status >= 1) {
                document.getElementById('cleaning-buttons').classList.remove('hidden');
                document.getElementById('check-button').classList.add('hidden');
                document.getElementById('error-check-container').style.pointerEvents = 'none'; // Kh√≥a checkbox
            }
        }

        // --- C√°c h√†m l√†m s·∫°ch d·ªØ li·ªáu (ƒë√£ tinh ch·ªânh) ---

        function cleanProductName(name) {
            // X·ª≠ l√Ω l·ªói thi·∫øu t√™n (STT 12)
            if (name.includes("(thi·∫øu t√™n s·∫£n ph·∫©m)")) return "S·∫£n ph·∫©m m·ªõi (ƒê√£ ƒëi·ªÅn)";
            // Chu·∫©n h√≥a t√™n (vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu v√† lo·∫°i b·ªè l·ªói g√µ)
            name = name.toLowerCase().replace(/op dien thoai/g, '·ªëp ƒëi·ªán tho·∫°i');
            name = name.replace(/binh giu nhiet/g, 'b√¨nh gi·ªØ nhi·ªát');
            name = name.replace(/chu·ªôt kh√¥ng d√¢y/g, 'chu·ªôt kh√¥ng d√¢y');
            
            const words = name.split(' ');
            const capitalizedWords = words.map(word => {
                if (word.length === 0) return '';
                // Vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu ti√™n c·ªßa m·ªói t·ª´
                return word.charAt(0).toUpperCase() + word.slice(1);
            });
            return capitalizedWords.join(' ');
        }

        function cleanPrice(price) {
            // X·ª≠ l√Ω l·ªói thi·∫øu gi√° (STT 4, 11)
            if (price.includes("(tr·ªëng)") || price.includes("(thi·∫øu)")) return "ƒê√£ b·ªï sung: 80,000ƒë";
            // Chu·∫©n h√≥a sang ƒë·ªãnh d·∫°ng 159,000ƒë (lo·∫°i b·ªè k√Ω t·ª± kh√¥ng c·∫ßn thi·∫øt)
            price = price.replace(/[^0-9\.]/g, '');
            if (price.length > 0) {
                 return price.replace(/\B(?=(\d{3})+(?!\d))/g, ",") + 'ƒë';
            }
            return price;
        }

        function cleanRating(rating) {
            // X·ª≠ l√Ω l·ªói thi·∫øu ƒë√°nh gi√° (STT 8)
            if (rating.includes("(tr·ªëng)")) return "4.6‚≠ê (ƒê√£ ƒëi·ªÅn)";
            
            // Chu·∫©n h√≥a ƒë√°nh gi√° 9/10 ho·∫∑c 10/10 (STT 5, 12)
            if (rating.includes('/10')) {
                const score = parseInt(rating.split('/')[0]) / 2; // Quy ƒë·ªïi thang 10 (max) sang thang 5 (max)
                rating = `${score.toFixed(1)}‚≠ê (Quy ƒë·ªïi)`;
            }
            
            // Chu·∫©n h√≥a sang 4.7‚≠ê
            rating = rating.replace(/[^0-9\.,‚≠ê]/g, '').replace(/,/g, '.');
            if (!rating.includes('‚≠ê')) {
                rating += '‚≠ê';
            }
            return rating;
        }
        
        // --- C√°c h√†m t∆∞∆°ng t√°c ---

        function checkErrors() {
            const checkboxes = document.querySelectorAll('.error-checkbox');
            let allCorrect = true;

            checkboxes.forEach(checkbox => {
                const isChecked = checkbox.checked;
                const isCorrect = checkbox.dataset.correct === 'true';

                if (isChecked !== isCorrect) {
                    allCorrect = false;
                }
            });

            if (allCorrect) {
                status = 1;
                renderTable(); // B·∫Øt ƒë·∫ßu l√†m n·ªïi b·∫≠t l·ªói (m√†u ƒë·ªè)
                STATUS_MSG.textContent = "‚úÖ Ch√∫c m·ª´ng! Em ƒë√£ ph√°t hi·ªán ra c·∫£ 3 lo·∫°i l·ªói d·ªØ li·ªáu ph·ªï bi·∫øn.";
                showMessageBox("Tuy·ªát v·ªùi! Em ƒë√£ x√°c ƒë·ªãnh ch√≠nh x√°c c√°c v·∫•n ƒë·ªÅ. B√¢y gi·ªù, h√£y th·ª±c hi·ªán c√°c b∆∞·ªõc l√†m s·∫°ch d·ªØ li·ªáu b√™n d∆∞·ªõi.");
            } else {
                STATUS_MSG.textContent = "‚ùå ƒê√°p √°n ch∆∞a ƒë√∫ng. H√£y ch·ªçn l·∫°i c√°c lo·∫°i l·ªói c√≥ trong b·∫£ng d·ªØ li·ªáu.";
                showMessageBox("Em h√£y quan s√°t k·ªπ l·∫°i b·∫£ng. C√≥ 3 lo·∫°i l·ªói ch√≠nh: tr√πng l·∫∑p, thi·∫øu v√† kh√¥ng ƒë·ªìng nh·∫•t. H√£y ch·ªçn l·∫°i cho ƒë√∫ng nh√©!");
            }
        }

        function removeDuplicates() {
            if (status < 1) {
                showMessageBox("‚ö†Ô∏è Em c·∫ßn ho√†n th√†nh ph·∫ßn Ph√°t hi·ªán L·ªói tr∆∞·ªõc!");
                return;
            }
            if (status >= 2) {
                showMessageBox("‚úÖ D·ªØ li·ªáu tr√πng l·∫∑p ƒë√£ ƒë∆∞·ª£c x√≥a. H√£y chuy·ªÉn sang b∆∞·ªõc 2: Chu·∫©n h√≥a & ƒêi·ªÅn thi·∫øu.");
                return;
            }

            // T·∫°o m·ªôt b·∫£n ƒë·ªì ƒë·ªÉ theo d√µi d·ªØ li·ªáu duy nh·∫•t d·ª±a tr√™n T√™n s·∫£n ph·∫©m ƒë√£ chu·∫©n h√≥a
            const seen = new Map();
            const cleanedData = [];

            initialData.forEach(item => {
                // S·ª≠ d·ª•ng h√†m chu·∫©n h√≥a t√™n ƒë·ªÉ nh·∫≠n di·ªán tr√πng l·∫∑p
                const standardizedName = cleanProductName(item.ten);
                
                // Ch·ªâ th√™m v√†o n·∫øu T√™n s·∫£n ph·∫©m ch∆∞a t·ª´ng xu·∫•t hi·ªán (sau khi ƒë√£ chu·∫©n h√≥a)
                if (!seen.has(standardizedName)) {
                    seen.set(standardizedName, true);
                    cleanedData.push(item);
                }
            });

            currentData = cleanedData;
            status = 2;
            renderTable();
            STATUS_MSG.textContent = "‚úÖ ƒê√£ lo·∫°i b·ªè c√°c d√≤ng d·ªØ li·ªáu b·ªã tr√πng l·∫∑p. (C√≤n l·∫°i " + currentData.length + " d√≤ng)";
            showMessageBox("Xu·∫•t s·∫Øc! Ch√∫ng ta ƒë√£ x√≥a c√°c d·ªØ li·ªáu b·ªã tr√πng l·∫∑p. Gi·ªù c√≤n l·∫°i c√°c l·ªói v·ªÅ ƒë·ªãnh d·∫°ng v√† gi√° tr·ªã thi·∫øu (v·∫´n ƒëang ƒë√°nh d·∫•u ƒë·ªè).");
        }

        function cleanAndStandardize() {
            if (status < 2) {
                showMessageBox("‚ö†Ô∏è Em c·∫ßn x√≥a d·ªØ li·ªáu tr√πng l·∫∑p tr∆∞·ªõc (b∆∞·ªõc 1)!");
                return;
            }
            if (status >= 3) {
                showMessageBox("üéâ B·∫£ng d·ªØ li·ªáu ƒë√£ HO√ÄN TO√ÄN S·∫†CH! Em ƒë√£ ho√†n th√†nh b√†i th·ª±c h√†nh.");
                return;
            }

            // √Åp d·ª•ng c√°c h√†m l√†m s·∫°ch cho d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l·ªçc tr√πng
            currentData = currentData.map(item => ({
                stt: item.stt, // Gi·ªØ l·∫°i STT g·ªëc ƒë·ªÉ ti·ªán theo d√µi
                ten: cleanProductName(item.ten),
                gia: cleanPrice(item.gia),
                danhGia: cleanRating(item.danhGia),
            }));
            
            status = 3;
            renderTable();
            STATUS_MSG.textContent = "üéâ B·∫£ng d·ªØ li·ªáu ƒë√£ HO√ÄN TO√ÄN S·∫†CH! (ƒê√£ chu·∫©n h√≥a ƒë·ªãnh d·∫°ng v√† ƒëi·ªÅn c√°c gi√° tr·ªã thi·∫øu).";
            showMessageBox("Ho√†n h·∫£o! Ch√∫ng ta ƒë√£ chu·∫©n h√≥a ƒë·ªãnh d·∫°ng v√† ƒëi·ªÅn c√°c gi√° tr·ªã c√≤n thi·∫øu. B·∫£ng d·ªØ li·ªáu c·ªßa em ƒë√£ s·∫µn s√†ng ƒë·ªÉ ph√¢n t√≠ch!");
        }

        // Kh·ªüi t·∫°o b·∫£ng khi trang t·∫£i xong
        window.onload = () => {
            renderTable();
        };

    </script>
</body>
</html>
